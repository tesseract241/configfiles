#!/usr/bin/env bash
language="en"
if [[ $1 -eq "-l"  || $1 -eq "-lang" ]]; then
    if [[ $# -lt 3 ]]; then
        echo "Usage: wiki [-l | -language language] query"; exit -1;
    else
    language=$2
    shift 2
    fi
fi
query=""
if [[ $# -gt 1 ]]; then
    query=$*
    query=${query// /_}
else
    query=$1
fi
if [[ -z query ]]; then
    echo "Usage: wiki [-l | -language language] query"; exit -1;
fi
curl -s "https://$language.wikipedia.org/w/api.php?action=query&format=json&prop=extracts&titles=$query&formatversion=2&explaintext=1&redirects=1" | jq '.query.pages|.[0].extract' -r
